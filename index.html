<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Conversion Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to bottom right, #e0f2fe, #f0f9ff);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 24px;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="calculator-container bg-white rounded-xl shadow-lg p-6 max-w-2xl w-full">
        <h3 class="text-3xl font-bold text-center text-blue-800 mb-2">Real Estate Sales & Marketing Calculator</h3>
        <p class="text-center text-gray-600 mb-6">Run your own numbers to see the impact of an improved sales conversion rate.</p>
      
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <!-- Left Column -->
            <div class="space-y-4">
                <div class="input-group">
                    <label for="leads" class="block text-gray-700 font-semibold mb-1">Number of New Leads per Month:</label>
                    <input type="number" id="leads" value="750" placeholder="e.g., 750" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              
                <div class="input-group">
                    <label for="units" class="block text-gray-700 font-semibold mb-1">Number of Units in Building:</label>
                    <input type="number" id="units" value="300" placeholder="e.g., 300" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              
                <div class="input-group">
                    <label for="price" class="block text-gray-700 font-semibold mb-1">Average Unit Price (in PHP):</label>
                    <input type="number" id="price" value="9000000" placeholder="e.g., 9000000" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              
                <div class="input-group">
                    <label for="costPerLead" class="block text-gray-700 font-semibold mb-1">Average Cost per Lead (in PHP):</label>
                    <input type="number" id="costPerLead" value="500" placeholder="e.g., 500" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
          
            <!-- Right Column -->
            <div class="space-y-4">
                <div class="input-group">
                    <label for="agents" class="block text-gray-700 font-semibold mb-1">Number of Sales Agents:</label>
                    <input type="number" id="agents" value="10" placeholder="e.g., 10" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              
                <div class="input-group">
                    <label for="conv1" class="block text-gray-700 font-semibold mb-1">Typical Conversion Rate (in %):</label>
                    <input type="number" id="conv1" value="2" placeholder="e.g., 2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
              
                <div class="input-group">
                    <label for="conv2" class="block text-gray-700 font-semibold mb-1">Improved Conversion Rate (in %):</label>
                    <input type="number" id="conv2" value="6" placeholder="e.g., 6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
        </div>
      
        <button onclick="calculate()" class="w-full py-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition duration-300">Calculate Impact</button>
      
        <div id="salesChartContainer" class="mt-8 bg-white p-4 rounded-lg shadow-inner">
            <canvas id="salesChart"></canvas>
        </div>
      
        <div id="results" class="results-container mt-6"></div>
    </div>
    
<script>
let myChart; // Variable to hold the chart instance

function formatCurrency(number) {
    if (isNaN(number) || !isFinite(number)) {
        return 'N/A';
    }
    return 'PHP ' + new Intl.NumberFormat('en-PH', {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0,
    }).format(number);
}

function calculate() {
    // Get all input values
    const leads = parseFloat(document.getElementById('leads').value);
    const units = parseFloat(document.getElementById('units').value);
    const price = parseFloat(document.getElementById('price').value);
    const costPerLead = parseFloat(document.getElementById('costPerLead').value);
    const agents = parseFloat(document.getElementById('agents').value);
    const conv1 = parseFloat(document.getElementById('conv1').value) / 100;
    const conv2 = parseFloat(document.getElementById('conv2').value) / 100;
    
    // Simple validation for inputs
    if (isNaN(leads) || isNaN(units) || isNaN(price) || isNaN(costPerLead) || isNaN(agents) || isNaN(conv1) || isNaN(conv2) || leads <= 0 || units <= 0 || price <= 0 || costPerLead < 0 || agents <= 0 || conv1 <= 0 || conv2 <= 0) {
        document.getElementById('results').innerHTML = '<p class="text-red-500 text-center font-bold mt-4">Please enter valid positive numbers for all fields. Cost per lead can be zero.</p>';
        return;
    }

    // Calculations for Scenario 1
    const unitsSold1 = leads * conv1;
    const timeToSell1 = units / unitsSold1;
    const salesValue1 = unitsSold1 * price;
    const totalMarketingCost1 = leads * costPerLead;
    const roi1 = totalMarketingCost1 > 0 ? ((salesValue1 - totalMarketingCost1) / totalMarketingCost1) * 100 : 'N/A';
    const salesPerAgent1 = unitsSold1 / agents;
    const salesValuePerAgent1 = salesValue1 / agents;

    // Calculations for Scenario 2
    const unitsSold2 = leads * conv2;
    const timeToSell2 = units / unitsSold2;
    const salesValue2 = unitsSold2 * price;
    const totalMarketingCost2 = leads * costPerLead;
    const roi2 = totalMarketingCost2 > 0 ? ((salesValue2 - totalMarketingCost2) / totalMarketingCost2) * 100 : 'N/A';
    const salesPerAgent2 = unitsSold2 / agents;
    const salesValuePerAgent2 = salesValue2 / agents;

    // Calculate the difference
    const salesValueDifference = salesValue2 - salesValue1;
    
    // Get the results container
    const resultsDiv = document.getElementById('results');
    
    // Generate the HTML for the results
    resultsDiv.innerHTML = `
        <div class="results-section bg-gray-50 rounded-lg p-4 mb-4 shadow-sm">
            <h4 class="text-xl font-semibold text-blue-700 mb-2">Scenario 1: Typical Conversion (${(conv1 * 100).toFixed(1)}%)</h4>
            <ul class="text-gray-700 space-y-1">
                <li>Units Sold per Month: <strong class="float-right">${unitsSold1.toFixed(1)}</strong></li>
                <li>Monthly Gross Sales Value: <strong class="float-right">${formatCurrency(salesValue1)}</strong></li>
                <li>Monthly Marketing Cost: <strong class="float-right">${formatCurrency(totalMarketingCost1)}</strong></li>
                <li>Units Sold per Agent: <strong class="float-right">${salesPerAgent1.toFixed(1)}</strong></li>
                <li>Monthly Sales Value per Agent: <strong class="float-right">${formatCurrency(salesValuePerAgent1)}</strong></li>
            </ul>
        </div>
        
        <div class="results-section bg-gray-50 rounded-lg p-4 mb-4 shadow-sm">
            <h4 class="text-xl font-semibold text-blue-700 mb-2">Scenario 2: Improved Conversion (${(conv2 * 100).toFixed(1)}%)</h4>
            <ul class="text-gray-700 space-y-1">
                <li>Units Sold per Month: <strong class="float-right">${unitsSold2.toFixed(1)}</strong></li>
                <li>Monthly Gross Sales Value: <strong class="float-right">${formatCurrency(salesValue2)}</strong></li>
                <li>Monthly Marketing Cost: <strong class="float-right">${formatCurrency(totalMarketingCost2)}</strong></li>
                <li>Units Sold per Agent: <strong class="float-right">${salesPerAgent2.toFixed(1)}</strong></li>
                <li>Monthly Sales Value per Agent: <strong class="float-right">${formatCurrency(salesValuePerAgent2)}</strong></li>
            </ul>
        </div>
        
        <div class="results-section bg-blue-50 rounded-lg p-4 mb-4 shadow-md">
            <h4 class="text-xl font-semibold text-blue-700 mb-2">Strategic Takeaway</h4>
            <ul class="text-blue-900 font-bold space-y-1">
                <li>Sales Timeline Reduced: <strong class="float-right">${(timeToSell1 - timeToSell2).toFixed(1)} months faster</strong></li>
                <li>Monthly Gross Sales Value: <strong class="float-right">${formatCurrency(salesValueDifference)} higher</strong></li>
                <li>Monthly Sales Per Agent: <strong class="float-right">${(salesPerAgent2 - salesPerAgent1).toFixed(1)} more units</strong></li>
                <li>Monthly Sales Value Per Agent: <strong class="float-right">${formatCurrency(salesValuePerAgent2 - salesValuePerAgent1)} higher</strong></li>
            </ul>
        </div>
    `;

    // Now, create the chart
    const ctx = document.getElementById('salesChart').getContext('2d');
    
    // Destroy the previous chart instance if it exists
    if (myChart) {
        myChart.destroy();
    }

    myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [
                `Typical Conversion (${(conv1 * 100).toFixed(1)}%)`, 
                `Improved Conversion (${(conv2 * 100).toFixed(1)}%)`,
                'Difference'
            ],
            datasets: [{
                label: 'Monthly Gross Sales Value',
                data: [salesValue1, salesValue2, salesValueDifference],
                backgroundColor: [
                    'rgba(153, 153, 153, 0.7)',
                    'rgba(0, 119, 181, 0.9)',
                    'rgba(24, 201, 100, 0.9)'
                ],
                borderColor: [
                    'rgba(153, 153, 153, 1)',
                    'rgba(0, 119, 181, 1)',
                    'rgba(24, 201, 100, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Gross Sales Value (in PHP)',
                        font: { size: 14 }
                    },
                    ticks: {
                        callback: function(value) {
                            return (value / 1000000) + 'M';
                        }
                    }
                },
                x: {
                    ticks: {
                        font: { size: 12 }
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Monthly Gross Sales Value Comparison',
                    font: { size: 18, weight: 'bold' }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += formatCurrency(context.parsed.y);
                            }
                            return label;
                        }
                    }
                }
            }
        }
    });
}
</script>

</body>
</html>
